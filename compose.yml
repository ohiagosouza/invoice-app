version: '3.9'

services:
  quoted-app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: quoted-app
    ports:
      - "8080:8080"
    depends_on:
      - mongodb
    environment:
      SPRING_DATA_MONGODB_URI: mongodb://mongodb:27017/quoted-db
      JWT_SECRET_KEY: cbee3899030c2724b18e8347fb39ad7d351d0268e887d33ccf2a8fc3742b5286fcd3db687d614e2e4d89287f6a8b6519ae732c2fe704ac2e607cd4b6295a7f450c99606d10dcd0fa5e8844399320c4d92c5245129446a16b94c104d0b4ac76394a8efc8489b2d72fc5841e8ab24267b82702af47582dfc898071c57854b568fc53dd833eac884bc4a2d9c69818ae3be62dd79d436fcafcad0ea05cfa2c14198d95a106c96ce1038b6a71de326a3d5f848498df988eb05fe1b25003cc76b1c6857c126331951be17de4da4f1caf639b7a9049ca5ee1a2a647975c4e6dddce27d4ff9c6eda04650f55cbb5d8799882d53b0bc15c792524eaa2400c9786054860b6
      SPRING_PROFILES_ACTIVE: dev
  mongodb:
    image: mongo:6
    container_name: mongo
    restart: always
    command: mongod --quiet
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db
volumes:
  mongo_data:
