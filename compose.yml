version: '3.9'

services:
  quoted-app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: quoted-app
    ports:
      - "8080:8080"
    depends_on:
      - mongodb
    environment:
      SPRING_DATA_MONGODB_URI: mongodb://mongodb:27017/quoted-db
#      JWT_SECRET_KEY: ${JWT_SECRET_KEY}
      JWT_SECRET_KEY: ccb7b79479bf15cfba4c1bc2f716b90b268aa0504682bccd47cf6372a9eaff8474d8a51117b71b178dbb00fc53fb079b64de37ab989764ac54ff1ae55a52e32676f162ecc5fa7c9957132dc4321194e0aae2fcfed6f2976c22216bd3366ee0d1189cf54d35809bb7fd91cc78482c95a9692e74d3c74ab3afacbf44070a43b84a027b3105d44ef472a588a0b3cad347146452a4b6a5cef3fede810c66847799f0f2e5c732f5c7bcc9cc391d669bef3155d49f06618790d5dc8b4b436e409002320a10d41a88ce49dfeba79e4d145e1ad3c3b42848adc879284d26ac67620953d999158d4886c14226baca2a64eb398a5bcb1945ae211a459950cb8b3f8116a011
      SPRING_PROFILES_ACTIVE: dev
  mongodb:
    image: mongo:6
    container_name: mongo
    restart: always
    command: mongod --quiet
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db
volumes:
  mongo_data:
